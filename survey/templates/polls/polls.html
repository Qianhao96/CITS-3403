{% extends 'base.html' %}
{% block extraCss %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/polls.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/swiper/swiper.min.css') }}">
{% endblock extraCss %}
{% block title %} {{ title }} {% endblock title %}
{% block content %}
<div style="min-height:100vh">
	<!--
	<h1 style="margin: 0 auto">
		<span>P</span>
		<span>O</span>
		<span>L</span>
		<span>L</span>
		<span>I</span>
		<span>N</span>
		<span>G</span>
		<span>.</span>
		<span>.</span>
		<span>.</span>
	</h1>
-->
	<div class="swiper-container mb-3 mt-3">
		<div class="swiper-wrapper">
			{%for data in databases%}
			<div class="swiper-slide">
				<div class="card card-border">
					<div class="card-top-img">
						<img class="card-author-img" src="../static/image/polls/Edd.jpg" alt="Ed" />
					</div>
					{% if not data[3] %}
					<div class="card-status text-danger">Vote your favorite {{data[0].name}}</div>
					{% else %}
					<div class="card-status text-success">You have voted</div>
					{% endif %}
					<div class="card-name">{{data[0].name}}</div>
					<div class="card-description">
						Edward Christopher "Ed" Sheeran MBE (born 17 February 1991) is an English singer-songwriter and guitarist. He also writes and produces songs on his own and created his label, Paw Print Records. Sheeran is recognized for doing pop music.
					</div>
					<div class="container-fluid">
						<div class="row music-infos" style="color: white">
							<div class="col-4 border-right">
								<div class="infos">{{data[2]}}</div>
								<div class="info-name">#VOTES</div>
							</div>
							<div class="col-4 border-right">
								<div class="infos">16/5/2018</div>
								<div class="info-name">END DATE</div>
							</div>
							<div class="col-4">
								<div class="info-vote">
									{% if data[3] %}
									<h5 class="text-warning centered">Voted</h5>
									{% elif not data[3]%}
									<button type="button" class="btn btn-link text-white centered info-name" data-toggle="modal" data-target="#{{data[0].name}}">
										TAKE VOTE
									</button>
									{% endif %}
								</div>
							</div>
						</div>
					</div><!-- grid system-->
				</div>
			</div>
			{%endfor%}
		</div>
		<div class="swiper-button-prev hide"></div>
		<div class="swiper-button-next hide"></div>
	</div>

	{%for data in databases%}
	<!-- Modal -->
	<div class="modal fade" id="{{data[0].name}}" data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header" style="border-bottom: none">
					<h5 class="modal-title" id="model-1-title">Polling</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">
							&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="head">
						<div class="poll-title row">
							<img class="icon-style" src="../../static/image/polls/computer.png" alt=">>" />
							Best Lassangne Recipe
						</div>
						<div class="poll-description" dir="auto">
							<div class="poll-title row">
								<img class="icon-style" src="../../static/image/polls/text-align.png" alt=">>" />
								Description
							</div>
						</div>
						<div class="row">
							<ul class="vote-rules">
								<li>First Past the Post Voting</li>
								<li>How it's works<ul>
										<li>Voters indicate on the ballot the movie that you most favourite</li>
										<li>The candidate who receives the most votes wins</li>
										<li>Sometimes described as winner takes all</li>
									</ul>
								</li>
							</ul>
						</div>
						<div class="poll-title">Optional</div>
						<ul>
							<li>There a button to watch the recipe</li>
						</ul>
						<div class="row poll-title">
							<img class="icon-style" height="34" width="52" src="../../static/image/polls/polls.png" alt=">>" />
							Ballot Options
						</div>
					</div>

					{%for poll in data[1]%}
					<div class="row">
						<div class="card mb-3 movie-container">
							<div class="row no-gutters">
								<div class="col-3">
									<img calss="card-img movie-media" src="static/image/polls/{{poll.image_file}}" alt="..." style="width: 95%">
								</div>
								<div class="col-9">
									<div class="card-body" style="padding: 10px">
										<h5 class="card-title text-dark">{{poll.name}}</h5>
										{% if current_user.is_active %}
										<button class="btn btn-link vote" id="{{poll.id}}" type="button">
											Vote me
										</button>
										{%else%}
										<a class="login vote" href="{{ url_for('users.login') }}">Login</a>
										{%endif%}
										<h6 class="text-secondary">Get more information by clicking the play button!!! </h6>
										<a class="youtube" data-toggle="modal" href="#{{data[0].name}}{{poll.id}}">
											<img class="youtube-media" src="{{ url_for('static', filename='image/polls/movie/play.png') }}" alt="YouTube">
										</a>
									</div>
								</div>
							</div>
						</div>
						<div class="modal fade" id="{{data[0].name}}{{poll.id}}">
							<div class="modal-dialog">
								<div class="modal-content" style="background-color: black; padding=0px;">
									<div class="modal-body">
										<iframe class="video-frame" style="width:100%; height: 300px;" src='{{ poll.video_url }}' frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
										</iframe>
									</div>
								</div>
							</div>
						</div>
					</div>
					{%endfor%}
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	{%endfor%}

	{% endblock content %}

	{% block extraScript %}
	<script type="text/javascript" src="{{url_for('static', filename='js/polls.js')}}"></script>
	<script type="text/javascript" src="{{url_for('static', filename='js/swiper/swiper.min.js')}}"></script>
	{% endblock extraScript %}
